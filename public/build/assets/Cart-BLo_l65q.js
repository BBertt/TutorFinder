import{r as n,j as e,H as b,a as m}from"./app-vktjkHzL.js";import{L as v}from"./Layout-DdWA2cnw.js";import{C as N}from"./ConfirmationModal-CGS6daQf.js";import"./GuestNavbar-DMqcayHC.js";import"./SuccessModal-CEwhlc4c.js";const w=({cartItems:r})=>{const[u,o]=n.useState(!1),[h,c]=n.useState(!1),[a,i]=n.useState(null),d=r.map(s=>s.id),p=r.reduce((s,t)=>s+parseFloat(t.course.price),0),f=async s=>{if(s.preventDefault(),d.length===0){alert("Your cart is empty.");return}o(!0),m.post(route("checkout"),{course_cart_ids:d},{preserveScroll:!0,onSuccess:t=>{const l=t.props?.invoice_url;l&&(window.location.href=l)},onError:t=>{const l=Object.values(t).flat().join(`
`);alert(`Validation failed:
`+l)},onFinish:()=>o(!1)}),o(!1)},j=s=>{i(s),c(!0)},x=()=>{i(null),c(!1)},g=()=>{a&&m.delete(route("cart.destroy",a.id),{preserveScroll:!0,onSuccess:()=>x()})};return e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Shopping Cart"}),e.jsxs("div",{className:"container mx-auto mt-10 mb-10",children:[e.jsx("h1",{className:"text-4xl font-extrabold mb-8 text-center",children:"Shopping Cart"}),r.length>0?e.jsxs("div",{className:"flex flex-col lg:flex-row shadow-lg my-10",children:[e.jsxs("div",{className:"w-full lg:w-3/4 bg-white p-10 dark:bg-darkSecondary dark:border-dark",children:[e.jsx("div",{className:"flex justify-between border-b pb-8",children:e.jsxs("h1",{className:"font-semibold text-2xl",children:[r.length," Total in Cart"]})}),e.jsx("div",{className:"flex flex-col gap-6 mt-10",children:r.map(s=>e.jsxs("div",{className:"flex items-center p-4 border rounded-lg shadow-sm",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.course.thumbnail_image_url,alt:s.course.title,className:"w-20 h-20 object-cover",onError:t=>{t.target.onerror=null,t.target.src="https://placehold.co/600x400/99D37C/4F6D40?text=Image+Missing"}})}),e.jsxs("div",{className:"flex-grow ml-4",children:[e.jsx("h2",{className:"font-bold text-lg",children:s.course.title}),e.jsx("p",{className:"text-sm dark:text-white",children:s.course.user?`${s.course.user.first_name} ${s.course.user.last_name}`:"Author"}),e.jsxs("p",{className:"font-bold dark:text-white mt-1",children:["Rp"," ",parseFloat(s.course.price).toLocaleString("id-ID")]})]}),e.jsx("div",{className:"ml-4",children:e.jsx("button",{onClick:()=>j(s),className:"text-red-500 hover:text-red-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]},s.id))})]}),e.jsxs("div",{className:"w-full lg:w-1/4 bg-primary text-white p-8 rounded-r-lg",children:[e.jsx("h1",{className:"font-bold text-2xl border-b pb-6",children:"Total"}),e.jsx("div",{className:"mt-8 space-y-4",children:r.map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"w-1/2 truncate",children:s.course.title}),e.jsxs("span",{children:["Rp"," ",parseFloat(s.course.price).toLocaleString("id-ID")]})]},s.id))}),e.jsx("div",{className:"border-t mt-8 pt-6",children:e.jsxs("div",{className:"flex font-bold justify-between text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Rp ",p.toLocaleString("id-ID")]})]})}),e.jsx("form",{onSubmit:f,className:"mt-10",children:e.jsx("button",{type:"submit",disabled:u||r.length===0,className:"p-2 font-extrabold rounded-full bg-secondary hover:bg-[#000000] w-full",children:"Checkout"})})]})]}):e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-2xl font-semibold",children:"Your cart is empty."})})]}),e.jsx(N,{isOpen:h,onClose:x,onConfirm:g,title:"Remove Item",message:`Are you sure you want to remove "${a?.course?.title}" from your cart?`,confirmText:"Yes, Remove",cancelText:"Cancel",confirmColor:"bg-red-600"})]})};w.layout=r=>e.jsx(v,{children:r});export{w as default};
