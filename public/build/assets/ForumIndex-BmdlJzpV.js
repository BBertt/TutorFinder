import{j as e,r as h,u as j,b as k,H as N,L as c,a as p}from"./app-DsVyxgb5.js";import{L as w}from"./Layout-Dxn0dT_C.js";import{F as S}from"./ForumPostCard-CStzfL85.js";import{P as _}from"./Pagination-DfQd3ovB.js";import{S as C}from"./SortDropdown-COKuCmBU.js";import{L as F}from"./LoginModal-BCuVPhc8.js";import"./GuestNavbar-DHozK7im.js";import"./SuccessModal-BP30cpHk.js";import"./VoteButtons-JGlFPLx2.js";import"./ConfirmationModal-CBmAON1O.js";function g({contributors:a}){return e.jsx("div",{className:"space-y-4",children:a.map((t,l)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-bold text-gray-400",children:l+1}),e.jsx("img",{className:"w-10 h-10 rounded-full",src:t.profile_image_path?t.profile_image_path:"/assets/icons/profile.svg",alt:`${t.first_name} ${t.last_name}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold dark:text-gray-200",children:`${t.first_name} ${t.last_name}`}),e.jsxs("p",{className:"text-sm text-gray-400",children:[parseInt(t.total_likes).toLocaleString()," ","Likes"]})]})]},t.id))})}function L({forums:a,topStudents:t,topTutors:l,filters:s}){const[i,m]=h.useState("students"),{auth:n}=j().props,[y,x]=h.useState(!1),o=s.view||"all",{data:d,setData:b}=k({search:s.search||""}),u=r=>{n.user||(r.preventDefault(),r.stopPropagation(),x(!0))},f=r=>{r.preventDefault(),p.get(route("forums.index"),{search:d.search,sort:s.sort,view:o==="my_forums"?"my_forums":void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},v=r=>{p.get(route("forums.index"),{sort:r,view:o==="my_forums"?"my_forums":void 0,search:d.search},{preserveState:!0,preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Forum"}),e.jsxs("section",{className:"bg-primary text-white rounded-lg p-8 text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"TutorFinder Forum"}),e.jsx("p",{className:"mt-2 text-lg opacity-80",children:"Concerned about something? Go ask the experts!"})]}),e.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("form",{onSubmit:f,className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("img",{className:"w-5 h-5 text-gray-400 dark:invert",src:"/assets/icons/magnifying-glass.svg",alt:"Search"})}),e.jsx("input",{type:"text",name:"search",value:d.search,onChange:r=>b("search",r.target.value),placeholder:"Search forums by title, description, or author...",className:"block w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg leading-5 bg-white placeholder-gray-400 dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex space-x-8 border-b dark:border-gray-700",children:[e.jsx(c,{href:route("forums.index",{sort:s.sort,view:void 0,search:d.search}),className:`py-2 text-lg font-semibold transition-colors ${o==="all"?"border-b-2 border-primary text-primary dark:text-primary":"text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,preserveState:!0,preserveScroll:!0,children:"All Forums"}),n.user&&e.jsx(c,{href:route("forums.index",{sort:s.sort,view:"my_forums",search:d.search}),className:`py-2 text-lg font-semibold transition-colors ${o==="my_forums"?"border-b-2 border-primary text-primary dark:text-primary":"text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,preserveState:!0,preserveScroll:!0,children:"My Forums"})]}),e.jsx(C,{currentSort:s.sort,onSortChange:v})]}),a.data.length>0?a.data.map(r=>e.jsx("div",{onClickCapture:u,children:e.jsx(S,{post:r,showDeleteButton:o==="my_forums"&&n.user?.id===r.user_id})},r.id)):e.jsxs("div",{className:"text-center text-gray-400 bg-white p-12 rounded-lg shadow-sm border dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:s.search?"No forums found matching your search.":o==="my_forums"?"You haven't posted any forums yet.":"No forums found."}),e.jsx("p",{className:"mt-2",children:s.search?"Try a different search term.":o==="my_forums"?"Click 'Create Forum' to share your thoughts!":"Be the first to post in the forum."})]}),e.jsx(_,{links:a.links})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 flex flex-col items-center dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-center dark:text-white",children:"Have concerns in your mind?"}),e.jsx(c,{href:route("forums.create"),onClick:u,className:"w-1/2 text-center bg-primary text-white py-2 rounded-full block hover:bg-opacity-80 font-bold",children:"Create Forum!"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h3",{className:"font-bold text-xl mb-4 text-center dark:text-white",children:"Top Contributors"}),e.jsxs("div",{className:"flex border-b mb-4 dark:border-dark",children:[e.jsx("button",{onClick:()=>m("students"),className:`w-1/2 py-2 text-center ${i==="students"?"border-b-2 border-primary font-semibold text-primary":"text-gray-400"}`,children:"Students"}),e.jsx("button",{onClick:()=>m("tutors"),className:`w-1/2 py-2 text-center ${i==="tutors"?"border-b-2 border-primary font-semibold text-primary":"text-gray-400"}`,children:"Tutors"})]}),i==="students"?e.jsx(g,{contributors:t}):e.jsx(g,{contributors:l})]})]})]})}),e.jsx(F,{isOpen:y,onClose:()=>x(!1)})]})}L.layout=a=>e.jsx(w,{children:a});export{L as default};
