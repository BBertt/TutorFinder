import{u as v,r as o,b as w,j as e}from"./app-C2sJ4SMv.js";import{L as C}from"./Layout-BQvFhhIJ.js";import{C as S}from"./ConfirmationModal-BGQM3HY5.js";import"./GuestNavbar-Bp_CNRAC.js";import"./SuccessModal-DfdrAkWn.js";const E=()=>{const{auth:r}=v().props,[p,x]=o.useState(r.user.profile_image_url||"/assets/icons/profile.svg"),[n,c]=o.useState(""),[u,h]=o.useState(""),[f,d]=o.useState(""),{data:l,setData:s,post:b,processing:g,errors:t,clearErrors:i}=w({firstName:r.user.first_name,lastName:r.user.last_name,phoneNumber:r.user.phone_number,dateOfBirth:r.user.date_of_birth,bio:r.user.bio}),N=a=>{s("profileImage",a.target.files[0]),x(URL.createObjectURL(a.target.files[0]))},k=a=>{a.preventDefault(),b("/profile",{forceFormData:!0,onBefore:j=>{j.data._method="patch"}}),m(!1)},[y,m]=o.useState(!1);return e.jsxs("div",{className:"max-w-lg w-full mx-auto my-10 bg-primary p-6 rounded-xl text-white flex flex-col items-center dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h2",{className:"text-xl font-extrabold mb-4",children:"Profile"}),e.jsxs("form",{className:"flex flex-col gap-6 w-full",children:[e.jsxs("div",{className:"relative mx-auto w-32 h-32",children:[e.jsx("img",{className:"w-32 h-32 object-cover rounded-full",src:p,alt:"Profile"}),e.jsx("label",{htmlFor:"profileImage",className:"absolute bottom-0 right-0 cursor-pointer",children:e.jsx("img",{src:"/assets/icons/edit.svg",alt:"Edit",className:"w-6 h-6 rounded-full"})}),e.jsx("input",{type:"file",id:"profileImage",accept:"image/*",onChange:N,className:"hidden"}),t.profileImage&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.profileImage})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"text-sm font-extrabold",children:"First Name"}),e.jsx("input",{type:"text",value:l.firstName,onChange:a=>{s("firstName",a.target.value),i("firstName"),a.target.value?c(""):c("The first name field is required.")},name:"firstName",placeholder:"John",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"}),(n||t.firstName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n||t.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"text-sm font-extrabold",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:a=>{s("lastName",a.target.value),i("lastName"),a.target.value?h(""):h("The last name field is required.")},name:"lastName",placeholder:"Doe",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"}),(u||t.lastName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u||t.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-extrabold",children:"Phone Number"}),e.jsx("input",{type:"text",value:l.phoneNumber,onChange:a=>{s("phoneNumber",a.target.value),i("phoneNumber"),a.target.value===""||/^\d+$/.test(a.target.value)?d(""):d("Please enter a valid phone number.")},name:"phoneNumber",placeholder:"081234567890",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"}),(f||t.phoneNumber)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f||t.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"text-sm font-extrabold",children:"Date of Birth"}),e.jsx("input",{type:"date",value:l.dateOfBirth,onChange:a=>{s("dateOfBirth",a.target.value)},name:"dateOfBirth",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"})]}),r.user?.role?.name==="tutor"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"text-sm font-extrabold",children:"Bio"}),e.jsx("input",{type:"text",value:l.bio||"",onChange:a=>s("bio",a.target.value),name:"bio",placeholder:"Write something about yourself",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"})]}),e.jsx("button",{type:"button",disabled:g,className:"p-2 font-extrabold rounded-full bg-secondary hover:bg-[#000000] w-full dark:bg-primary dark:hover:bg-opacity-80",onClick:()=>m(!0),children:"Save Changes"}),e.jsx(S,{isOpen:y,onClose:()=>m(!1),onConfirm:k,title:"Update Profile",message:"Are you sure you want to update your profile?",confirmText:"Yes, Update",cancelText:"Cancel",confirmColor:"bg-primary"})]})]})};E.layout=r=>e.jsx(C,{children:r});export{E as default};
