import{j as e,H as o,L as i,a}from"./app-C4Y_S2gZ.js";import{L as x}from"./Layout-C84A4Xv9.js";import"./GuestNavbar-CAQsJ3KH.js";import"./SuccessModal-BQvV3_2x.js";const m=({transactions:l,auth:h})=>{const d=s=>{a.post(route("transactions.cancel",s),{},{preserveScroll:!0})},c=s=>{a.post(route("transactions.pay",s),{},{preserveScroll:!0})},n=s=>{switch(s){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(e.Fragment,{children:[e.jsx(o,{title:"Transaction List"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Transaction List"}),l&&l.length>0?e.jsx("div",{className:"space-y-6",children:l.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Transaction #",s.external_id]}),e.jsx("p",{className:"text-sm text-gray-400",children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm font-medium px-2 py-1 rounded-full inline-block ${n(s.status)}`,children:s.status}),e.jsxs("p",{className:"font-bold text-lg",children:["Rp"," ",parseFloat(s.total_amount).toLocaleString("id-ID")]}),s.status==="pending"&&e.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>d(s.id),className:"px-3 py-1 rounded bg-red-600 text-white",children:"Cancel"}),e.jsx("button",{onClick:()=>c(s.id),className:"px-3 py-1 rounded bg-primary text-white",children:"Pay"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Courses:"}),e.jsx("div",{className:"flex flex-col gap-4 mt-2",children:s.details&&s.details.map(r=>e.jsx("div",{className:"flex items-center p-4 border rounded-lg shadow-sm",children:r.course?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:r.course.thumbnail_image_url,alt:r.course.title,className:"w-20 h-20 object-cover rounded-lg",onError:t=>{t.target.onerror=null,t.target.src="https://placehold.co/600x400/99D37C/4F6D40?text=Image+Missing"}})}),e.jsxs("div",{className:"flex-grow ml-4",children:[e.jsx(i,{href:route("courses.show",r.course.id),children:e.jsx("h2",{className:"font-bold text-lg hover:underline",children:r.course.title})}),e.jsx("p",{className:"text-sm text-gray-400",children:r.course.user?r.course.user.name:"Author"}),e.jsxs("p",{className:"font-bold mt-1",children:["Rp"," ",parseFloat(r.price_at_transaction).toLocaleString("id-ID")]})]})]}):e.jsx("p",{className:"w-full text-center",children:"Course information is not available."})},r.id))})]})]},s.id))}):e.jsx("p",{children:"You have no transactions yet."})]})})})})]})};m.layout=l=>e.jsx(x,{children:l});export{m as default};
