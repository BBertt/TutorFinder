import{u as w,r as o,b as C,j as e,a as S}from"./app-C4Y_S2gZ.js";import{L as E}from"./Layout-C84A4Xv9.js";import{C as F}from"./ConfirmationModal-JUKUvmrZ.js";import"./GuestNavbar-CAQsJ3KH.js";import"./SuccessModal-BQvV3_2x.js";const O=()=>{const{user:r}=w().props,[f,b]=o.useState(r.profile_image_url||"/assets/icons/profile.svg"),[n,m]=o.useState(""),[c,u]=o.useState(""),[h,d]=o.useState(""),{data:l,setData:s,post:g,processing:N,errors:t,clearErrors:i}=C({firstName:r.first_name,lastName:r.last_name,phoneNumber:r.phone_number,dateOfBirth:r.date_of_birth,bio:r.bio}),y=a=>{s("profileImage",a.target.files[0]),b(URL.createObjectURL(a.target.files[0]))},p=a=>{a.preventDefault(),g(`/users/${r.id}`,{forceFormData:!0,onBefore:v=>{v.data._method="patch"}})},k=()=>{S.get("/users")},[j,x]=o.useState(!1);return e.jsxs("div",{className:"max-w-lg w-full mx-auto my-10 bg-primary p-6 rounded-xl text-white flex flex-col items-center dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h2",{className:"text-xl font-extrabold mb-4",children:"User Profile"}),e.jsxs("form",{onSubmit:p,className:"flex flex-col gap-6 w-full",children:[e.jsxs("div",{className:"relative mx-auto w-32 h-32",children:[e.jsx("img",{className:"w-32 h-32 object-cover rounded-full",src:f,alt:"Profile"}),e.jsx("label",{htmlFor:"profileImage",className:"absolute bottom-0 right-0 cursor-pointer",children:e.jsx("img",{src:"/assets/icons/edit.svg",alt:"Edit",className:"w-6 h-6 rounded-full"})}),e.jsx("input",{type:"file",id:"profileImage",accept:"image/*",onChange:y,className:"hidden"}),t.profileImage&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.profileImage})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"text-sm font-extrabold",children:"First Name"}),e.jsx("input",{type:"text",value:l.firstName,onChange:a=>{s("firstName",a.target.value),i("firstName"),a.target.value?m(""):m("The first name field is required.")},name:"firstName",placeholder:"John",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"}),(n||t.firstName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n||t.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"text-sm font-extrabold",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:a=>{s("lastName",a.target.value),i("lastName"),a.target.value?u(""):u("The last name field is required.")},name:"lastName",placeholder:"Doe",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"}),(c||t.lastName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c||t.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-extrabold",children:"Phone Number"}),e.jsx("input",{type:"text",value:l.phoneNumber,onChange:a=>{s("phoneNumber",a.target.value),i("phoneNumber"),a.target.value===""||/^\d+$/.test(a.target.value)?d(""):d("Please enter a valid phone number.")},name:"phoneNumber",placeholder:"081234567890",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"}),(h||t.phoneNumber)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h||t.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"text-sm font-extrabold",children:"Date of Birth"}),e.jsx("input",{type:"date",value:l.dateOfBirth,onChange:a=>{s("dateOfBirth",a.target.value)},name:"dateOfBirth",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"})]}),r?.role?.name==="tutor"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"text-sm font-extrabold",children:"Bio"}),e.jsx("input",{type:"text",value:l.bio||"",onChange:a=>s("bio",a.target.value),name:"bio",placeholder:"Write something about yourself",className:"px-4 py-2 text-black w-full border-gray-200 rounded-full shadow-sm dark:bg-darkSecondary dark:border-dark dark:text-white dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx("button",{type:"button",disabled:N,className:"p-2 font-extrabold rounded-full bg-secondary hover:bg-[#000000] w-full dark:bg-primary dark:hover:bg-opacity-80",onClick:()=>x(!0),children:"Update"}),e.jsx("button",{type:"button",className:"p-2 font-extrabold rounded-full bg-white text-primary hover:bg-secondary hover:text-white w-full",onClick:k,children:"Cancel"})]}),e.jsx(F,{isOpen:j,onClose:()=>x(!1),onConfirm:p,title:"Update Profile",message:"Are you sure you want to update your profile?",confirmText:"Yes, Update",cancelText:"Cancel",confirmColor:"bg-primary"})]})]})};O.layout=r=>e.jsx(E,{children:r});export{O as default};
