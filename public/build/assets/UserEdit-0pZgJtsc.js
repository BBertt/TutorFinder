import{u as C,r as o,b as k,j as e,a as E}from"./app-B27Fz-uK.js";import{L as F}from"./Layout-DjIRaP5W.js";import{C as O}from"./ConfirmationModal-BwxtX91B.js";import"./GuestNavbar-B5bLSoHW.js";import"./SuccessModal-CP1VXOKE.js";const P=()=>{const{user:a}=C().props,[h,b]=o.useState(a.profile_image_url||"/assets/icons/profile.svg"),[m,d]=o.useState(""),[u,c]=o.useState(""),[f,i]=o.useState(""),{data:l,setData:s,post:N,processing:g,errors:r,clearErrors:n}=k({firstName:a.first_name,lastName:a.last_name,phoneNumber:a.phone_number,dateOfBirth:a.date_of_birth,bio:a.bio}),j=t=>{s("profileImage",t.target.files[0]),b(URL.createObjectURL(t.target.files[0]))},p=t=>{t.preventDefault(),N(`/users/${a.id}`,{forceFormData:!0,onBefore:w=>{w.data._method="patch"}})},v=()=>{E.get("/users")},[y,x]=o.useState(!1);return e.jsxs("div",{className:"max-w-lg w-full mx-auto my-10 bg-primary p-6 rounded-xl text-white flex flex-col items-center dark:bg-darkSecondary dark:border-dark",children:[e.jsx("h2",{className:"text-xl font-extrabold mb-4",children:"User Profile"}),e.jsxs("form",{onSubmit:p,className:"flex flex-col gap-6 w-full",children:[e.jsxs("div",{className:"relative mx-auto w-32 h-32",children:[e.jsx("img",{className:"w-32 h-32 object-cover rounded-full",src:h,alt:"Profile"}),e.jsx("label",{htmlFor:"profileImage",className:"absolute bottom-0 right-0 cursor-pointer",children:e.jsx("img",{src:"/assets/icons/edit.svg",alt:"Edit",className:"w-6 h-6 rounded-full"})}),e.jsx("input",{type:"file",id:"profileImage",accept:"image/*",onChange:j,className:"hidden"}),r.profileImage&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.profileImage})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"text-sm font-extrabold",children:"First Name"}),e.jsx("input",{type:"text",value:l.firstName,onChange:t=>{s("firstName",t.target.value),n("firstName"),t.target.value?d(""):d("The first name field is required.")},name:"firstName",placeholder:"John",className:"px-4 py-2 rounded-full text-black w-full"}),(m||r.firstName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m||r.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"text-sm font-extrabold",children:"Last Name"}),e.jsx("input",{type:"text",value:l.lastName,onChange:t=>{s("lastName",t.target.value),n("lastName"),t.target.value?c(""):c("The last name field is required.")},name:"lastName",placeholder:"Doe",className:"px-4 py-2 rounded-full text-black w-full"}),(u||r.lastName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:u||r.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-extrabold",children:"Phone Number"}),e.jsx("input",{type:"text",value:l.phoneNumber,onChange:t=>{s("phoneNumber",t.target.value),n("phoneNumber"),t.target.value===""||/^\d+$/.test(t.target.value)?i(""):i("Please enter a valid phone number.")},name:"phoneNumber",placeholder:"081234567890",className:"px-4 py-2 rounded-full text-black w-full"}),(f||r.phoneNumber)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:f||r.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"text-sm font-extrabold",children:"Date of Birth"}),e.jsx("input",{type:"date",value:l.dateOfBirth,onChange:t=>{s("dateOfBirth",t.target.value)},name:"dateOfBirth",className:"px-4 py-2 rounded-full text-black w-full"})]}),a?.role?.name==="tutor"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"text-sm font-extrabold",children:"Bio"}),e.jsx("input",{type:"text",value:l.bio||"",onChange:t=>s("bio",t.target.value),name:"bio",placeholder:"Write something about yourself",className:"px-4 py-2 rounded-full text-black w-full"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx("button",{type:"button",disabled:g,className:"p-2 font-extrabold rounded-full bg-secondary hover:bg-[#000000] w-full dark:bg-primary dark:hover:bg-opacity-80",onClick:()=>x(!0),children:"Update"}),e.jsx("button",{type:"button",className:"p-2 font-extrabold rounded-full bg-white text-primary hover:bg-secondary hover:text-white w-full",onClick:v,children:"Cancel"})]}),e.jsx(O,{isOpen:y,onClose:()=>x(!1),onConfirm:p,title:"Update Profile",message:"Are you sure you want to update your profile?",confirmText:"Yes, Update",cancelText:"Cancel",confirmColor:"bg-primary"})]})]})};P.layout=a=>e.jsx(F,{children:a});export{P as default};
